<!-- templates/nav.html (Login) -->
<!doctype html>
<html lang="en" data-bs-theme="light">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Epicheck Login</title>

  <!-- Global libraries -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon.png') }}">
  <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='apple-touch-icon.png') }}">

  <style>
    :root{
      --ink: #0b0f19;           /* text on light */
      --paper: #ffffff;         /* page bg light */
      --paper-dk:#0b0f19;       /* page bg dark */
      --card: rgba(255,255,255,.78);
      --card-border: rgba(148,163,184,.28);
      --card-dk: rgba(15,17,23,.72);
      --card-border-dk: rgba(255,255,255,.10);
    }

    /* Hide any global navbar on this view */
    body { padding-top: 0 !important; }
    header, nav.navbar, .navbar, .sticky-top { display: none !important; }

    /* ===== Background (matches hero neutral style + particles) ===== */
    .auth-wrap{
      min-height:100vh;
      position:relative;
      display:flex; align-items:center; justify-content:center;
      background:#fff;
      color:#111;
      border-bottom:1px solid #e5e7eb;
      overflow:hidden;
    }
    @media (prefers-color-scheme: dark){
      .auth-wrap{ background:#0b0f19; color:#e5e7eb; border-bottom-color:#1f2937; }
    }

    .hero-bg-particles{ position:absolute; inset:0; z-index:0; pointer-events:none; overflow:hidden; }
    .hero-bg-particles span{
      position:absolute; display:block; border-radius:50%; opacity:.8; filter:blur(4px);
      animation:float-particle linear infinite;
    }
    .hero-bg-particles span:nth-child(1){ width:120px;height:120px;background:rgba(96,165,250,.25); top:12%; left:18%; animation-duration:18s; }
    .hero-bg-particles span:nth-child(2){ width:180px;height:180px;background:rgba(244,114,182,.20); top:42%; left:70%; animation-duration:24s; animation-delay:-6s; }
    .hero-bg-particles span:nth-child(3){ width:90px;height:90px;background:rgba(167,139,250,.25); top:72%; left:22%; animation-duration:20s; animation-delay:-3s; }
    .hero-bg-particles span:nth-child(4){ width:150px;height:150px;background:rgba(59,130,246,.18); top:26%; left:50%; animation-duration:28s; animation-delay:-10s; }
    .hero-bg-particles span:nth-child(5){ width:100px;height:100px;background:rgba(250,204,21,.18); top:82%; left:80%; animation-duration:22s; animation-delay:-5s; }
    @keyframes float-particle{
      0%{ transform:translateY(0) translateX(0) scale(1); }
      50%{ transform:translateY(-50px) translateX(30px) scale(1.05); }
      100%{ transform:translateY(0) translateX(0) scale(1); }
    }

    /* ===== Auth Card (glass, like other sections) ===== */
    .auth-card{
      position:relative; z-index:1;
      width:100%; max-width:460px;
      border-radius:16px; padding:28px 24px;
      background: var(--card);
      border:1px solid var(--card-border);
      backdrop-filter: blur(10px);
      box-shadow:0 10px 28px rgba(0,0,0,.08);
    }
    @media (prefers-color-scheme: dark){
      .auth-card{
        background: var(--card-dk);
        border-color: var(--card-border-dk);
        box-shadow:none;
      }
    }

    /* Title + eyebrow harmony with index sections */
    .auth-head { text-align:center; margin-bottom:12px; }
    .auth-head .eyebrow{
      font-size:.8rem; letter-spacing:.16em; text-transform:uppercase; color:#94a3b8;
    }
    @media (prefers-color-scheme: dark){ .auth-head .eyebrow{ color:#64748b; } }
    .auth-head h4{
      font-weight:800; line-height:1.15; margin:8px 0 0;
    }
    .subtle { color:#93a2b8; font-size:.95rem; }

    /* Inputs (match contact section) */
    .form-label{ font-size:.9rem; color:#475569; margin-bottom:.35rem; }
    @media (prefers-color-scheme: dark){ .form-label{ color:#cbd5e1; } }
    .form-control{
      border-radius:10px; border:1px solid #e5e7eb; background:#fff; color:#0f172a;
      padding:.75rem .9rem; transition:border-color .15s ease, box-shadow .15s ease, background-color .15s ease;
    }
    .form-control:focus{
      outline:none; border-color:#94a3b8; box-shadow:0 0 0 4px rgba(148,163,184,.2); background:#fff;
    }
    @media (prefers-color-scheme: dark){
      .form-control{ background:#0b0f19; color:#e5e7eb; border-color:#334155; }
      .form-control:focus{ border-color:#475569; box-shadow:0 0 0 4px rgba(71,85,105,.25); background:#0b0f19; }
    }

    .input-group .form-control{ border-right:0; }
    .input-group .btn-outline-secondary{
      border-left:0; border-color:#e5e7eb; color:#475569;
    }
    @media (prefers-color-scheme: dark){
      .input-group .btn-outline-secondary{ border-color:#334155; color:#cbd5e1; }
    }

    /* Buttons (reuse homepage “plain” button feel) */
    .btn-auth{
      display:inline-flex; align-items:center; justify-content:center; gap:.4rem;
      width:100%;
      border-radius:10px; padding:.9rem 1.1rem; font-weight:700;
      background:#111; color:#fff; border:1px solid #111; transition: background-color .2s ease, border-color .2s ease;
    }
    .btn-auth:hover{ background:#000; border-color:#000; color:#fff; }
    @media (prefers-color-scheme: dark){
      .btn-auth{ background:#e5e7eb; color:#0b0f19; border-color:#e5e7eb; }
      .btn-auth:hover{ background:#fff; border-color:#fff; color:#0b0f19; }
    }

    .mini{ font-size:.9rem; text-decoration:none; }
    .row-links{ display:flex; justify-content:space-between; align-items:center; }
  </style>
</head>

<body>
<section class="auth-wrap">
  <!-- subtle particles to match hero -->
  <div class="hero-bg-particles">
    <span></span><span></span><span></span><span></span><span></span>
  </div>

  <div class="auth-card">
    <div class="auth-head">
      <div class="eyebrow">Welcome back</div>
      <h4>Log in</h4>
    </div>

    {% if error %}<div class="alert alert-danger mt-3">{{ error|safe }}</div>{% endif %}

    <form method="post" class="mt-3" novalidate>
      {% if csrf_token %}<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">{% endif %}

      <div class="mb-3">
        <label class="form-label">Email</label>
        <input name="email" type="email" class="form-control" required autocomplete="email" placeholder="you@school.edu">
      </div>

      <div class="mb-2">
        <label class="form-label">Password</label>
        <div class="input-group">
          <input id="password" name="password" type="password" class="form-control" required autocomplete="current-password" placeholder="••••••••">
          <button class="btn btn-outline-secondary" type="button" id="togglePwd" aria-label="Show password">
            <i class="bi bi-eye"></i>
          </button>
        </div>
      </div>

      <div class="row-links mini mb-3">
        <a href="{{ url_for('register') }}" class="mini">Create account</a>
      </div>

      <button class="btn-auth" type="submit">
        <i class="bi bi-box-arrow-in-right"></i> Log in
      </button>
    </form>
  </div>
</section>

<script>
  // Password visibility toggle
  (function(){
    const btn = document.getElementById('togglePwd');
    const input = document.getElementById('password');
    if(btn && input){
      btn.addEventListener('click', function(){
        const isPwd = input.type === 'password';
        input.type = isPwd ? 'text' : 'password';
        this.innerHTML = isPwd ? '<i class="bi bi-eye-slash"></i>' : '<i class="bi bi-eye"></i>';
        this.setAttribute('aria-label', isPwd ? 'Hide password' : 'Show password');
      });
    }
  })();
</script>
</body>
</html>
